<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Night You Become 20</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,500&family=Cormorant+Garamond&display=swap" rel="stylesheet">

<style>

*{margin:0;padding:0;box-sizing:border-box;}

body{
    height:100vh;
    overflow:hidden;
    background:url('milkyway.jpeg') center center / cover no-repeat fixed;
    font-family:sans-serif;
    color:white;
    position:relative;
}

/* Overlay LIGHTER so fireworks visible */
body::before{
    content:"";
    position:absolute;
    inset:0;
    background:rgba(0,0,0,0.45);
    z-index:0;
}

/* Stars */
#stars{
    position:absolute;
    inset:0;
    z-index:1;
}

.star{
    position:absolute;
    border-radius:50%;
    background:white;
    box-shadow:0 0 6px white;
    animation:twinkle var(--dur) infinite alternate;
}

@keyframes twinkle{
    from{opacity:0.3;}
    to{opacity:1;}
}

/* Memory words */
.memory{
    position:absolute;
    font-family:'Cormorant Garamond', serif;
    font-size:15px;
    opacity:0.28;
    color:white;
    text-shadow:0 0 8px rgba(255,255,255,0.5);
    animation:float 15s ease-in-out infinite alternate;
    z-index:3;
}

@keyframes float{
    from{transform:translateY(0px) rotate(var(--rot));}
    to{transform:translateY(-15px) rotate(var(--rot));}
}

/* Center content */
.center{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    text-align:center;
    z-index:4;
}

h1{
    font-family:'Playfair Display', serif;
    font-style:italic;
    font-size:42px;
    margin-bottom:10px;
}

.sub{
    margin-bottom:30px;
    font-size:18px;
    opacity:0.9;
}

/* Timer */
.timer{
    font-size:60px;
    letter-spacing:6px;
    font-weight:300;
    color:#ffffff;
    text-shadow:
        0 0 10px #ffffff,
        0 0 25px #ffd36b,
        0 0 45px #ffdf7a;
    animation:pulse 2s infinite alternate;
}

@keyframes pulse{
    from{
        text-shadow:
        0 0 8px #ffffff,
        0 0 20px #ffd36b,
        0 0 35px #ffdf7a;
    }
    to{
        text-shadow:
        0 0 15px #ffffff,
        0 0 35px #ffd36b,
        0 0 65px #ffdf7a;
    }
}

/* Lock */
.status{
    margin-top:20px;
    display:flex;
    justify-content:center;
    align-items:center;
    gap:10px;
    font-size:16px;
}

.lock{
    width:22px;
    height:22px;
    border:2px solid #ffd36b;
    border-radius:4px;
    position:relative;
}

.lock::before{
    content:"";
    position:absolute;
    top:-10px;
    left:4px;
    right:4px;
    height:10px;
    border:2px solid #ffd36b;
    border-bottom:none;
    border-radius:10px 10px 0 0;
    transition:0.6s;
}

.lock.open::before{
    transform:rotate(-40deg) translateX(-4px);
}

@keyframes shake {
  0%,100% { transform:translateX(0); }
  25% { transform:translateX(-5px); }
  75% { transform:translateX(5px); }
}

.lock.shake {
  animation: shake 0.4s;
}

/* Canvas */
canvas{
    position:absolute;
    inset:0;
    pointer-events:none;
    z-index:2;
}

/* Key */
#key{
    position:absolute;
    bottom:80px;
    left:50%;
    transform:translateX(-50%);
    width:120px;
    height:40px;
    cursor:pointer;
    z-index:5;
}

.key-head{
    width:40px;
    height:40px;
    border-radius:50%;
    background:linear-gradient(135deg,#d4a73c,#ffdf7a);
    box-shadow:0 0 25px #ffd36b;
    position:absolute;
}

.key-shaft{
    position:absolute;
    left:40px;
    top:15px;
    width:60px;
    height:10px;
    background:linear-gradient(90deg,#d4a73c,#ffdf7a);
}

.key-tooth{
    position:absolute;
    left:90px;
    top:15px;
    width:15px;
    height:20px;
    background:linear-gradient(90deg,#d4a73c,#ffdf7a);
}

/* Fade */
#fade{
    position:absolute;
    inset:0;
    background:black;
    opacity:0;
    transition:1.5s;
    pointer-events:none;
    z-index:6;
}

</style>
</head>

<body>

<div id="stars"></div>
<canvas id="canvas"></canvas>
<div id="fade"></div>

<div class="center">
    <h1>The Night You Become 20</h1>
    <div class="sub">Some feelings don’t ask to be spoken. They simply stay.</div>
    <div class="timer" id="timer">00:00:10</div>
    <div class="status">
        <div id="lock" class="lock"></div>
        <div id="statusText">Access Denied</div>
    </div>
</div>

<!-- Memory Words -->
<div class="memory" style="top:10%;left:15%;--rot:-8deg;">second class</div>
<div class="memory" style="top:30%;left:70%;--rot:10deg;">St. Joseph’s School</div>
<div class="memory" style="top:65%;left:20%;--rot:-5deg;">lollipops</div>
<div class="memory" style="top:80%;left:75%;--rot:8deg;">chemistry unit one</div>
<div class="memory" style="top:50%;left:50%;--rot:-10deg;">surprise cake</div>
<div class="memory" style="top:20%;left:85%;--rot:6deg;">Red House captain</div>
<div class="memory" style="top:75%;left:40%;--rot:-4deg;">96%</div>
<div class="memory" style="top:40%;left:5%;--rot:12deg;">tenth class</div>

<div id="key">
  <div class="key-head"></div>
  <div class="key-shaft"></div>
  <div class="key-tooth"></div>
</div>

<script>

/* Stars */
const starContainer=document.getElementById("stars");
for(let i=0;i<200;i++){
    let s=document.createElement("div");
    s.className="star";
    s.style.width=s.style.height=Math.random()*2+1+"px";
    s.style.top=Math.random()*100+"%";
    s.style.left=Math.random()*100+"%";
    s.style.setProperty("--dur",Math.random()*3+2+"s");
    starContainer.appendChild(s);
}

/* Tick */
const tick=new Audio("tick.mp3");
tick.volume=0.2;

/* Timer */
const target=Date.now()+10000;
const timerDisplay=document.getElementById("timer");
const lock=document.getElementById("lock");
const statusText=document.getElementById("statusText");
const key=document.getElementById("key");

let unlocked=false;

let interval=setInterval(()=>{
    const now=Date.now();
    const dist=target-now;

    if(dist<=0){
        clearInterval(interval);
        timerDisplay.innerHTML="00:00:00";
        midnightEvent();
    } else {
        const s=Math.floor(dist/1000);
        timerDisplay.innerHTML="00:00:"+String(s).padStart(2,"0");
        tick.currentTime=0;
        tick.play().catch(()=>{});
    }
},1000);

/* Midnight */
function midnightEvent(){
    unlocked=true;
    lock.classList.add("open");
    statusText.innerHTML="Access Granted";
    brightenStars();
    launchFireworks();
}

function brightenStars(){
    document.querySelectorAll(".star").forEach(s=>{
        s.style.background="#ffd36b";
        s.style.boxShadow="0 0 12px #ffd36b";
    });
}

/* Fireworks */
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let rockets=[],particles=[],animating=false;

function launchFireworks(){
    animating=true;
    let count=0;

    const launcher=setInterval(()=>{
        rockets.push({
            x:Math.random()*canvas.width*0.6+canvas.width*0.2,
            y:canvas.height,
            progress:0,
            curve:Math.random()*60+40,
            speed:7
        });
        count++;
        if(count>=6) clearInterval(launcher);
    },900);

    animate();
}

function animate(){
    if(!animating) return;

    ctx.fillStyle="rgba(0,0,0,0.12)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    rockets.forEach((r,i)=>{
        r.progress+=0.05;
        r.x+=Math.sin(r.progress*4)*r.curve*0.12;
        r.y-=r.speed;

        ctx.beginPath();
        ctx.arc(r.x,r.y,8,0,Math.PI*2);
        ctx.fillStyle="#ffdd55";
        ctx.shadowColor="#ff9900";
        ctx.shadowBlur=45;
        ctx.fill();
        ctx.shadowBlur=0;

        if(r.y<canvas.height*0.3){
            for(let j=0;j<160;j++){
                const angle=Math.random()*2*Math.PI;
                const speed=Math.random()*5+2;
                particles.push({
                    x:r.x,
                    y:r.y,
                    vx:Math.cos(angle)*speed,
                    vy:Math.sin(angle)*speed,
                    life:120
                });
            }
            rockets.splice(i,1);
        }
    });

    particles.forEach((p,i)=>{
        p.x+=p.vx;
        p.y+=p.vy;
        p.vy+=0.05;
        p.life--;

        ctx.beginPath();
        ctx.arc(p.x,p.y,5,0,Math.PI*2);
        ctx.fillStyle=`rgba(255,200,0,${p.life/120})`;
        ctx.shadowColor="#ffaa00";
        ctx.shadowBlur=35;
        ctx.fill();
        ctx.shadowBlur=0;

        if(p.life<=0) particles.splice(i,1);
    });

    if(rockets.length||particles.length){
        requestAnimationFrame(animate);
    } else {
        animating=false;
    }
}

/* Key Drag – Mouse + Touch Support */
let dragging = false;

function checkUnlock(x, y) {
    const lockRect = lock.getBoundingClientRect();

    if (
        x > lockRect.left &&
        x < lockRect.right &&
        y > lockRect.top &&
        y < lockRect.bottom
    ) {
        if (!unlocked) {
            statusText.innerHTML = "Access Denied";
            lock.classList.add("shake");
            setTimeout(() => lock.classList.remove("shake"), 400);
        } else {
            document.getElementById("fade").style.opacity = 1;
            setTimeout(() => window.location.href = "page2.html", 1500);
        }
    }
}

/* Desktop */
key.addEventListener("mousedown", () => dragging = true);
document.addEventListener("mouseup", () => dragging = false);

document.addEventListener("mousemove", (e) => {
    if (!dragging) return;

    key.style.left = e.clientX - 60 + "px";
    key.style.top = e.clientY - 20 + "px";

    checkUnlock(e.clientX, e.clientY);
});

/* Mobile */
key.addEventListener("touchstart", () => dragging = true);

document.addEventListener("touchend", () => dragging = false);

document.addEventListener("touchmove", (e) => {
    if (!dragging) return;

    const touch = e.touches[0];

    key.style.left = touch.clientX - 60 + "px";
    key.style.top = touch.clientY - 20 + "px";

    checkUnlock(touch.clientX, touch.clientY);
});

</script>
</body>
</html>